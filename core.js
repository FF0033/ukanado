!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";class s{constructor(e){this.stack=document.getElementById(e),this.training=!1}_getHTML(){return this.stack.innerHTML}_setHTML(e){this.stack.innerHTML=e}shift(){this.stack.childNodes[0].className+="slide",setTimeout(function(){this.stack.removeChild(this.stack.childNodes[0])},300)}inject(e){let t="";for(let i=0;i<e.length;i++)t+="<div ",1==this.training&&(t+='romaji="'+Object.values(e[i])+'"'),t+=">"+Object.keys(e[i])+"</div>";this._setHTML(t)}}class r{constructor(e){this.weight=[.75,.2,.049,.001],this.kana=a,this.list=Object.getOwnPropertyNames(this.kana),this.data=this.generateLevel(e)}generateLevel(e){let t=[],i=this.kana;for(let e in i)for(let t in i[e]){let s=Object.keys(i[e][t])[0],r=Object.values(i[e][t])[0],n="";for(let e=0;e<s.length;e++){let t=s[e].charCodeAt(0);t+=96,n+=String.fromCharCode(t)}this.kana[e].push({[n]:r})}for(let i=0;i<e;i++){let e=o.getItem(this.list,this.weight),i=~~(Math.random()*this.kana[e].length);t.push(this.kana[e][i])}return t}}class n{constructor(e,t,i){this.score=document.getElementById(e),this.timer=document.getElementById(t),this.endScreen=document.getElementById(i),this.questionCount=100,this._init()}_init(){this.startTime=0,this.endTime=0,this.timerStopped=!0,this.progress=0,this.endScreen.className=""}incrementProgress(){this.progress++,this.injectProgress()}setQuestionCount(e){this.questionCount=e,this.injectProgress()}startTimer(){0==this.startTime&&(this.timerStopped=!1,this.startTime=new Date,requestAnimationFrame(this.updateTimer.bind(this)))}updateTimer(){this.timerStopped||(requestAnimationFrame(this.updateTimer.bind(this)),this.injectTime())}endTimer(){this.endTime=new Date,this.timerStopped=!0;var e=this.getSecondsElapsed(this.startTime,this.endTime);this.injectTimerEnd(e)}getSecondsElapsed(e,t){return(t-e)/1e3}getProgress(){return this.progress+"/"+this.questionCount}getGrade(){return this.time/this.answered}reset(){this._init()}injectTime(){let e=this.getSecondsElapsed(this.startTime,new Date);this.timer.innerHTML=e.toFixed(1)}injectProgress(){this.score.innerHTML=this.getProgress()}injectTimerEnd(e){this.endScreen.className+="active",this.endScreen.childNodes[3].innerHTML=e.toFixed(1)}}class o{static getBetween(e,t){return Math.random()*(t-e)+e}static getItem(e,t){let i=t.reduce((e,t,i,s)=>e+t),s=this.getBetween(0,i),r=0;for(let i=0;i<e.length;i++)if(s<=(r=+(r+=t[i]).toFixed(2)))return e[i]}}var a={kana:[{"あ":"a"},{"い":"i"},{"う":"u"},{"え":"e"},{"お":"o"},{"か":"ka"},{"き":"ki"},{"く":"ku"},{"け":"ke"},{"こ":"ko"},{"さ":"sa"},{"す":"su"},{"せ":"se"},{"そ":"so"},{"し":"shi"},{"た":"ta"},{"ち":"chi"},{"つ":"tsu"},{"て":"te"},{"と":"to"},{"な":"na"},{"に":"ni"},{"ぬ":"nu"},{"ね":"ne"},{"の":"no"},{"は":"ha"},{"ひ":"hi"},{"ふ":"fu"},{"へ":"he"},{"ほ":"ho"},{"ま":"ma"},{"み":"mi"},{"む":"mu"},{"め":"me"},{"も":"mo"},{"や":"ya"},{"ゆ":"yu"},{"よ":"yo"},{"ら":"ra"},{"り":"ri"},{"る":"ru"},{"れ":"re"},{"ろ":"ro"},{"わ":"wa"},{"を":"wo"},{"ん":"n"}],diacritics:[{"ゔ":"vu"},{"が":"ga"},{"ぎ":"gi"},{"ぐ":"gu"},{"げ":"ge"},{"ご":"go"},{"ざ":"za"},{"ず":"zu"},{"ぜ":"ze"},{"ぞ":"zo"},{"じ":"ji"},{"だ":"da"},{"ぢ":"di"},{"づ":"du"},{"で":"de"},{"ど":"do"},{"ば":"ba"},{"び":"bi"},{"ぶ":"bu"},{"べ":"be"},{"ぼ":"bo"},{"ぱ":"pa"},{"ぴ":"pi"},{"ぷ":"pu"},{"ぺ":"pe"},{"ぽ":"po"}],digraphs:[{"ゔぁ":"va"},{"ゔぃ":"vi"},{"ゔぇ":"ve"},{"ゔぉ":"vo"},{"きゃ":"kya"},{"きぃ":"kyi"},{"きゅ":"kyu"},{"ぎゃ":"gya"},{"ぎぃ":"gyi"},{"ぎゅ":"gyu"},{"ぎぇ":"gye"},{"ぎょ":"gyo"},{"しゃ":"sha"},{"しゅ":"shu"},{"しょ":"sho"},{"じゃ":"ja"},{"じゅ":"ju"},{"じょ":"jo"},{"ちゃ":"cha"},{"ちゅ":"chu"},{"ちょ":"cho"},{"にゃ":"nya"},{"にゅ":"nyu"},{"にょ":"nyo"},{"ひゃ":"hya"},{"ひゅ":"hyu"},{"ひょ":"hyo"},{"びゃ":"bya"},{"びゅ":"byu"},{"びょ":"byo"},{"ぴゃ":"pya"},{"ぴゅ":"pyu"},{"ぴょ":"pyo"},{"ふぁ":"fa"},{"ふぃ":"fi"},{"ふぇ":"fe"},{"ふぉ":"fo"},{"みゃ":"mya"},{"みゅ":"myu"},{"みょ":"myo"},{"りゃ":"rya"},{"りゅ":"ryu"},{"りょ":"ryo"},{"きぇ":"kye"},{"きょ":"kyo"},{"じぃ":"jyi"},{"じぇ":"jye"},{"ちぃ":"cyi"},{"ちぇ":"che"},{"ひぃ":"hyi"},{"ひぇ":"hye"},{"びぃ":"byi"},{"びぇ":"bye"},{"ぴぃ":"pyi"},{"ぴぇ":"pye"},{"みぇ":"mye"},{"みぃ":"myi"},{"りぃ":"ryi"},{"りぇ":"rye"},{"にぃ":"nyi"},{"にぇ":"nye"},{"しぃ":"syi"},{"しぇ":"she"},{"いぇ":"ye"},{"うぁ":"wha"},{"うぉ":"who"},{"うぃ":"wi"},{"うぇ":"we"},{"ゔゃ":"vya"},{"ゔゅ":"vyu"},{"ゔょ":"vyo"},{"すぁ":"swa"},{"すぃ":"swi"},{"すぅ":"swu"},{"すぇ":"swe"},{"すぉ":"swo"},{"くゃ":"qya"},{"くゅ":"qyu"},{"くょ":"qyo"},{"くぁ":"qwa"},{"くぃ":"qwi"},{"くぅ":"qwu"},{"くぇ":"qwe"},{"くぉ":"qwo"},{"ぐぁ":"gwa"},{"ぐぃ":"gwi"},{"ぐぅ":"gwu"},{"ぐぇ":"gwe"},{"ぐぉ":"gwo"},{"つぁ":"tsa"},{"つぃ":"tsi"},{"つぇ":"tse"},{"つぉ":"tso"},{"てゃ":"tha"},{"てぃ":"thi"},{"てゅ":"thu"},{"てぇ":"the"},{"てょ":"tho"},{"とぁ":"twa"},{"とぃ":"twi"},{"とぅ":"twu"},{"とぇ":"twe"},{"とぉ":"two"},{"ぢゃ":"dya"},{"ぢぃ":"dyi"},{"ぢゅ":"dyu"},{"ぢぇ":"dye"},{"ぢょ":"dyo"},{"でゃ":"dha"},{"でぃ":"dhi"},{"でゅ":"dhu"},{"でぇ":"dhe"},{"でょ":"dho"},{"どぁ":"dwa"},{"どぃ":"dwi"},{"どぅ":"dwu"},{"どぇ":"dwe"},{"どぉ":"dwo"},{"ふぅ":"fwu"},{"ふゃ":"fya"},{"ふゅ":"fyu"},{"ふょ":"fyo"}],obsolete:[{"ゐ":"wi"},{"ゑ":"we"}]},h=new class{constructor(){window.addEventListener("keypress",e=>this._handleInputChar(e.key)),this.practise=0,this.inputBuffer="",this.stack=new s("stack"),this.score=new n("progress","timer","end-screen"),this.score.setQuestionCount(20),this.currentLevel=new r(this.score.questionCount),this._displayQuestions()}_handleInputChar(e){this.inputBuffer+=e,1==this.score.timerStopped&&(this.score.endTime&&location.reload(),this.score.startTimer()),this.inputBuffer.length>this.getCurrentAnswer().length&&(this.inputBuffer=this.inputBuffer.substring(1)),this._answeredCorrectly()&&this.clearCurrentQuiz()}_answeredCorrectly(){return this.inputBuffer==this.getCurrentAnswer()}_displayQuestions(){this.stack.inject(this.currentLevel.data)}clearCurrentQuiz(){this.inputBuffer="",this.currentLevel.data.shift(),this.stack.shift(),this.score.incrementProgress(),0==this.currentLevel.data.length&&this.score.endTimer()}getCurrentQuestion(){return Object.keys(this.currentLevel.data[0])[0]}getCurrentAnswer(){return Object.values(h.currentLevel.data[0])[0]}}}]);